<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
	<link rel="icon" type="image/png" href="assets/img/favicon.png">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>
		MedClinic
	</title>
	<!-- daypilot libraries -->
	<link type="text/css" rel="stylesheet" href="../helpers/demo.css?v=2018.2.232" />
	<link type="text/css" rel="stylesheet" href="../helpers/media/layout.css?v=2018.2.232" />
	<link type="text/css" rel="stylesheet" href="../helpers/media/elements.css?v=2018.2.232" />
	<script src="../helpers/jquery-1.9.1.min.js" type="text/javascript"></script>
	<script src="../js/daypilot-all.min.js?v=2018.2.232" type="text/javascript"></script>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport'
	/>
	<!--     Fonts and icons     -->
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons"
	/>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
	<!-- CSS Files -->
	<link href="../assets/css/material-dashboard.css?v=2.1.0" rel="stylesheet" />
</head>

<body class="">

	<div class="wrapper ">
		<div class="sidebar" data-color="purple" data-background-color="white">
			<!--
				Tip 1: You can change the color of the sidebar using: data-color="purple | azure | green | orange | danger"

				Tip 2: you can also add an image using data-image tag
			-->
			<div class="logo">
				<a class="simple-text logo-normal">
					MedClinic
				</a>
			</div>

			<div class="sidebar-wrapper">
				<ul class="nav">
					<li class="nav-item">
						<a class="nav-link" href="patient_profile.php">
							<i class="material-icons">person</i>
							<p>Profile</p>
						</a>
					</li>
					<li class="nav-item active">
						<a class="nav-link" href="#0">
							<i class="material-icons">add_circle</i>
							<p>New Appointment</p>
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="patient_consulties.php">
							<i class="material-icons">schedule</i>
							<p>History</p>
						</a>
					</li>
					<!-- your sidebar here -->
				</ul>
			</div>
		</div>

		<div class="main-panel">
			<!-- Navbar -->
			<nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
				<div class="container-fluid">
					<div class="navbar-wrapper">
						<a class="navbar-brand" href="#pablo"></a>
					</div>
					<button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false"
					 aria-label="Toggle navigation">
						<span class="sr-only">Toggle navigation</span>
						<span class="navbar-toggler-icon icon-bar"></span>
						<span class="navbar-toggler-icon icon-bar"></span>
						<span class="navbar-toggler-icon icon-bar"></span>
					</button>
					<div class="collapse navbar-collapse justify-content-end">
						<ul class="navbar-nav">
							<li class="nav-item">
								<a class="nav-link" href="../../index.html">
									<i class="material-icons">arrow_back</i> LOGOUT
								</a>
							</li>
							<!-- your navbar here -->
						</ul>
					</div>
				</div>
			</nav>
			<!-- End Navbar -->
			<div class="content">

				<form method="post" action="../../../php_backend/save-forms/master/pat_save_appt.php">
			
					<div class="horizontal-align w-full">
						<div style="width: 20%;">
							<p>Clinic:</p>
						</div>
						<div class="wrap-input m-t-10">
							<select class="input" id="ClinicID" name="clinic" onfocus="getClinics()" onchange="getSpec()">
							</select>
						</div>
					</div>
					<div class="horizontal-align w-full">
						<div style="width: 20%;">
							<p>Specialization:</p>
						</div>
						<div class="wrap-input m-t-10">
							<select class="input" id="MedSpec" name="spec" onfocus="getSpec()" onchange="getMedicos()">
							</select>
						</div>
					</div>

					<div class="horizontal-align w-full">
						<div style="width: 20%;">
							<p>CRM:</p>
						</div>
						<div class="wrap-input m-t-10">
							<select class="input" id="MedCrm" name="crm" onfocus="getMedicos()" onchange="getSchedule()">
							</select>
						</div>
					</div>

					<div class="horizontal-align w-full">
						<div style="width: 20%;">
							<p>Date:</p>
						</div>
						<div class="wrap-input m-t-10">
							<input class="input" type="date" name="appt_date" id="DayCalendar" onchange="getSchedule()">
						</div>
					</div>
		
					<div class="horizontal-align w-full">
						<div style="width: 20%;">
							<p>Hour:</p>
						</div>
						<div class="m-t-10">
							<!--select name="time" id="MedWeek">
							</select-->
							<div id="MedWeek">
							</div>
						</div>
					</div>
					
					<div style="margin: auto; text-align: center; padding-top: 20px">
						<button id="submit" class='submit-button' type="submit">Create</button>
					</div>
					
				</form>

				<!--div class="container-fluid">
					Week:
					<a href="javascript:dp.startDate = dp.startDate.addMonths(-1); dp.update();">Previous</a>
					|
					<a href="javascript:dp.startDate = dp.startDate.addMonths(1); dp.update();">Next</a>

					<div id="dp"></div>

				</div-->
				<footer class="footer">
					<div class="container-fluid">
					</div>
				</footer>
			</div>
		</div>
		<!--   Core JS Files   -->
		<script src="assets/js/core/jquery.min.js" type="text/javascript"></script>
		<script src="assets/js/core/popper.min.js" type="text/javascript"></script>
		<script src="assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
		<script src="assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
		<!--  Google Maps Plugin    -->
		<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
		<!-- Chartist JS -->
		<script src="assets/js/plugins/chartist.min.js"></script>
		<!--  Notifications Plugin    -->
		<script src="assets/js/plugins/bootstrap-notify.js"></script>
		<!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
		<script src="assets/js/material-dashboard.min.js?v=2.1.0" type="text/javascript"></script>

		<script>
			
			function getClinics() {
				
				if (window.XMLHttpRequest) {
					// code for IE7+, Firefox, Chrome, Opera, Safari
					xmlhttp = new XMLHttpRequest();
				} else {
					// code for IE6, IE5
					xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
				}
				xmlhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						document.getElementById("ClinicID").innerHTML = this.responseText;
					}
				};
				xmlhttp.open("GET","../../../php_backend/save-forms/master/pat_ajax_clinics.php", true);
				xmlhttp.send();
			}

			function getSpec() {

				var clinic = document.getElementById("ClinicID").value;
				
				if (window.XMLHttpRequest) {
					// code for IE7+, Firefox, Chrome, Opera, Safari
					xmlhttp = new XMLHttpRequest();
				} else {
					// code for IE6, IE5
					xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
				}
				xmlhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						document.getElementById("MedSpec").innerHTML = this.responseText;
					}
				};
				xmlhttp.open("GET","../../../php_backend/save-forms/master/pat_ajax_specs.php?clinic="+clinic, true);
				xmlhttp.send();
			}

			function getMedicos() {

				var clinic = document.getElementById("ClinicID").value;
				var spec = document.getElementById("MedSpec").value;
				
				if (window.XMLHttpRequest) {
					// code for IE7+, Firefox, Chrome, Opera, Safari
					xmlhttp = new XMLHttpRequest();
				} else {
					// code for IE6, IE5
					xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
				}
				xmlhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						document.getElementById("MedCrm").innerHTML = this.responseText;
					}
				};
				xmlhttp.open("GET","../../../php_backend/save-forms/master/pat_ajax_doctors.php?clinic="+clinic+"&spec="+spec, true);
				xmlhttp.send();
			}

			function getSchedule() {

				var crm = document.getElementById("MedCrm").value;
				var day = document.getElementById("DayCalendar").value;

				if (window.XMLHttpRequest) {
					// code for IE7+, Firefox, Chrome, Opera, Safari
					xmlhttp = new XMLHttpRequest();
				} else {
					// code for IE6, IE5
					xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
				}
				xmlhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						document.getElementById("MedWeek").innerHTML = this.responseText;
					}
				};
				xmlhttp.open("GET","../../../php_backend/save-forms/admin_panel/ajax_schedule.php?crm="+crm+"&day="+day, true);
				xmlhttp.send();
			}

		</script>

		<!--Daypilot JS-->
		<!--script type="text/javascript">
			var dp = new DayPilot.Month("dp");
			dp.viewType = 'Weeks';
			dp.showWeekend = false;

			// view
			dp.startDate = "2018-09-28";  // or just dp.startDate = "2013-03-25";

			// generate and load events
			for (var i = 0; i < 10; i++) {
				var duration = Math.floor(Math.random() * 1.2);
				var start = Math.floor(Math.random() * 6) - 3; // -3 to 3

				var e = new DayPilot.Event({
					start: new DayPilot.Date("2018-09-28T00:00:00").addDays(start),
					end: new DayPilot.Date("2018-09-28T12:00:00").addDays(start).addDays(duration),
					id: DayPilot.guid(),
					text: "Event " + i
				});
				dp.events.add(e);
			}

			// event creating
			dp.onTimeRangeSelected = function (args) {
				//var name = prompt("New event name:", "Event");
				var modal = new DayPilot.Modal();
				modal.onClosed = function (args) {
					console.log(args)
					var e = new DayPilot.Event({
						start: args.start,
						end: args.end,
						//id: DayPilot.guid(),
						text: name
					});
					dp.events.add(e);
					dp.clearSelection();
					//console.log(e.data)
				};

				modal.showUrl("new_month.php?start=" + args.start + "&end=" + args.end);
			};

			// event deleting
			dp.onEventDeleted = function (args) {
				this.message("Event deleted.");
			};

			dp.onEventClicked = function (args) {
				alert("clicked: " + args.e.id());
			};

			dp.init();
		</script-->

		<script type="text/javascript">
			$(document).ready(function () {
				var url = window.location.href;
				var filename = url.substring(url.lastIndexOf('/') + 1);
				if (filename === "") filename = "index.html";
				$(".menu a[href='" + filename + "']").addClass("selected");
			});

		</script>
</body>

</html>